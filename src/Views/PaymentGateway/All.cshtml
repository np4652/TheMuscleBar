@model List<TheMuscleBar.AppCode.Reops.Entities.PaymentGatewayModel>
@if (Model.Any())
{
    int i = 0;
    foreach (var item in Model)
    {
        i++;
        <tr data-paymentGateway-id="@item.Id" data-Pg-Id="@item.PGId">
            <td>@i</td>
            <td><a href="javascript:void(0)" class="btn-edit btn-link">@item.PGId</a></td>
            <td>@item.BaseURL</td>
            <td>@item.MerchantID</td>
            <td>@item.MerchantKey</td>
            <td>@item.SuccessURL</td>
            <td>@item.FailURL</td>
            <td>@item.StatusCheckURL</td>

            <td>
                <div class="custom-control custom-switch">
                    <input type="checkbox" class="custom-control-input isLive" id="IsLive_@i" @(item.IsLive ? "checked='checked'" : "") />
                    <label class="custom-control-label" for="IsLive_@i"></label>
                </div>


            </td>
            <td>
                <div class="custom-control custom-switch">
                    <input type="checkbox" class="custom-control-input IsLoggingTrue " id="IsLoggingTrue_@i" @(item.IsLoggingTrue ? "checked='checked'" : "") />
                    <label class="custom-control-label" for="IsLoggingTrue_@i"></label>
                </div>

            </td>
            <td>
                <div class="custom-control custom-switch">
                    <input type="checkbox" class="custom-control-input IsActive  " id="IsActive_@i" @(item.IsActive ? "checked='checked'" : "") />
                    <label class="custom-control-label" for="IsActive_@i"></label>
                </div>

            </td>
        </tr>
    }
}
<script>
    (() => {
        $('.isLive').click(e => {
            let element = $(e.currentTarget).closest('tr');
            let param = {
                id: element.data().paymentgatewayId
            };
            $.post('/PaymentGateway/ChangeLiveStatus', param)
                .done(result => {
                    Q.notify(result.statusCode, result.responseText);
                }).always(() => { });
        })
    })();

    $('.IsLoggingTrue').unbind().click(e => {
        let element = $(e.currentTarget).closest('tr');
        let param = {
            id: element.data().paymentgatewayId
        };
        $.post('/PaymentGateway/ChangeLoggingStatus', param)
            .done(result => {
                Q.notify(result.statusCode, result.responseText);
            }).fail(xhr => {
                an.title = 'Oops!!';
                an.content = xhr.responseText;
                an.alert(-1);
            }).always(() => { });
    })


    $('.IsActive').click(e => {
        let element = $(e.currentTarget).closest('tr');
        let param = {
            id: element.data().paymentgatewayId
        };
        $.post('/PaymentGateway/ChangeActiveStatus', param)
            .done(result => {
                Q.notify(result.statusCode, result.responseText);
            }).always(() => { });
    })
    $('.btn-edit').unbind().click(function () {
        let _id = $(this).closest('tr').data().paymentgatewayId;
        editDialog(_id);
    });
</script>


