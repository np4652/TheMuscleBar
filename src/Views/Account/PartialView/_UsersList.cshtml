@using TheMuscleBar.AppCode.Extensions
@model IEnumerable<TheMuscleBar.Models.ApplicationUser>
@{
    string role = User.GetLoggedInUserRoles();
}
@if (Model != null && Model.Any())
{
    int i = 1;

    @foreach (var item in Model)
    {
        <tr data-user-id="@item.Id" data-fos-id="@item.FOSId">
            <td>@i</td>
            <td>
                <span class="btn-link cursor-pointer btnaddUser">@Html.DisplayFor(modelItem => item.Name)</span>
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.UserName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.PhoneNumber)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Email)
            </td>
           
             <td>
                <div class="custom-control custom-switch">
                    <input type="checkbox" class="custom-control-input IsActive" id="IsActive_@i" @(item.IsActive ? "checked='checked'" : "") />
                    <label class="custom-control-label" for="IsActive_@i"></label>
                </div>

            </td>
        </tr>
        i++;
    }
}
else
{
    <tr>
        <td colspan="5">No Records Found</td>
    </tr>
}

<script>
    $('.btnaddUser').click(e => {
        let _id = $(e.currentTarget).closest('tr').data().userId;
        dialog.user(_id);
    });
    $('.IsActive').unbind().click(e => {       
        let element = $(e.currentTarget).closest('tr');
        let param = {
            Id: element.data().userId
        };
        $.post('/User/ChangeAction', param)
            .done(result => {
                Q.notify(result.statusCode, result.responseText);
            }).fail(xhr => {
                an.title = 'Oops!!';
                an.content = xhr.responseText;
                an.alert(-1);
            }).always(() => { });
    })
</script>